import{b as G,d as U,h as q}from"./chunk-3DL5UBSW.js";import{c as he,d as Me}from"./chunk-OF5WNUAR.js";import"./chunk-UL7CW2R5.js";import"./chunk-HMYTSN73.js";import{b as me,e as le,h as pe,k as ue,l as xe,m as Oe}from"./chunk-3ZQEGT5D.js";import{a as ce,b as se}from"./chunk-BNOJGNQL.js";import"./chunk-7GRVYKBV.js";import{b as ge,c as de}from"./chunk-RQYI5VJN.js";import{b as fe,f as _e,i as Ce,q as ye}from"./chunk-VCTHQUAT.js";import"./chunk-5FVWXJNG.js";import{a as J,b as K,c as Q,d as X,e as Z,f as ee,h as te}from"./chunk-RW4EGM7U.js";import{E as ne,F as ie,W as oe,Y as re,Z as ae}from"./chunk-347WKLGE.js";import{$b as S,Ab as C,Bc as N,Cb as d,Cc as H,D as E,Ec as W,Ga as R,Gc as Y,H as z,Ja as a,Mb as b,Na as y,Qb as c,R as O,Rb as u,S as v,Sb as h,T as V,Ua as B,Ub as $,Vb as A,Wb as L,Ya as f,Zb as j,ac as w,bc as I,c as M,f as T,ga as l,ha as p,hb as F,o as x,ob as m,p as D,pb as i,qb as o,rb as P,yb as _}from"./chunk-5LZ43AQJ.js";import"./chunk-7CGTOI24.js";var be=()=>[6,12,24];function Se(t,n){t&1&&(i(0,"div",5),P(1,"mat-spinner"),i(2,"p"),c(3,"Loading category..."),o()())}function we(t,n){if(t&1){let e=_();i(0,"div",12)(1,"button",13),C("click",function(){l(e);let r=d(2);return p(r.goBack())}),i(2,"mat-icon"),c(3,"arrow_back"),o()(),i(4,"div",14)(5,"div",15)(6,"mat-icon"),c(7),o()(),i(8,"div",16)(9,"h1",17),c(10),o(),i(11,"p",18),c(12),o(),i(13,"p",19),c(14),o()()()()}if(t&2){let e=n.ngIf;a(7),u(e.icon),a(3),u(e.name),a(2),u(e.description),a(2),h("",e.offerCount," offers available")}}function Ie(t,n){if(t&1&&(i(0,"mat-card-subtitle"),c(1),o()),t&2){let e=d().$implicit;a(),h(" Code: ",e.referralCode," ")}}function ke(t,n){if(t&1&&(i(0,"div",31)(1,"mat-icon",32),c(2,"visibility"),o(),i(3,"span"),c(4),o()()),t&2){let e=d().$implicit;a(4),h("",e.clickCount," clicks")}}function Te(t,n){if(t&1){let e=_();i(0,"mat-card",26),C("click",function(){let r=l(e).$implicit,s=d(4);return p(s.onOfferClick(r))})("keydown.enter",function(){let r=l(e).$implicit,s=d(4);return p(s.onOfferClick(r))})("keydown.space",function(){let r=l(e).$implicit,s=d(4);return p(s.onOfferClick(r))}),i(1,"mat-card-header")(2,"mat-card-title"),c(3),o(),f(4,Ie,2,1,"mat-card-subtitle",4),o(),i(5,"mat-card-content"),P(6,"p",27),f(7,ke,5,1,"div",28),o(),i(8,"mat-card-actions",29)(9,"button",30)(10,"mat-icon"),c(11,"open_in_new"),o(),c(12," Get Offer "),o()()()}if(t&2){let e=n.$implicit;F("aria-label","Open "+e.title+" referral link"),a(3),u(e.title),a(),m("ngIf",e.referralCode),a(2),m("innerHTML",e.description,R),a(),m("ngIf",e.clickCount)}}function De(t,n){if(t&1&&(i(0,"div",24),f(1,Te,13,5,"mat-card",25),o()),t&2){let e=d().ngIf,g=d(2);a(),m("ngForOf",e.data)("ngForTrackBy",g.trackByOffer)}}function Ee(t,n){if(t&1){let e=_();i(0,"mat-paginator",33),C("page",function(r){l(e);let s=d(3);return p(s.onPageChange(r))}),o()}if(t&2){let e=d().ngIf,g=d(2);m("length",e.total)("pageSize",g.pageSize)("pageIndex",g.currentPage-1)("pageSizeOptions",j(5,be))("showFirstLastButtons",!0)}}function ze(t,n){t&1&&(i(0,"h3"),c(1,"No offers found"),o())}function Ve(t,n){t&1&&(i(0,"h3"),c(1,"No offers available"),o())}function Re(t,n){t&1&&(i(0,"p"),c(1," Try adjusting your search terms or browse all offers. "),o())}function Be(t,n){t&1&&(i(0,"p"),c(1,"Offers for this category will appear here once they are added."),o())}function Fe(t,n){if(t&1){let e=_();i(0,"button",38),C("click",function(){l(e);let r=d(4);return r.searchTerm="",p(r.onSearchChange())}),c(1," Clear Search "),o()}}function $e(t,n){if(t&1&&(i(0,"div",34)(1,"mat-icon",35),c(2,"search_off"),o(),f(3,ze,2,0,"h3",36)(4,Ve,2,0,"ng-template",null,0,I)(6,Re,2,0,"p",36)(7,Be,2,0,"ng-template",null,1,I)(9,Fe,2,0,"button",37),o()),t&2){let e=b(5),g=b(8),r=d(3);a(3),m("ngIf",r.searchTerm)("ngIfElse",e),a(3),m("ngIf",r.searchTerm)("ngIfElse",g),a(3),m("ngIf",r.searchTerm)}}function Ae(t,n){if(t&1&&(i(0,"div",20),f(1,De,2,2,"div",21)(2,Ee,1,6,"mat-paginator",22)(3,$e,10,5,"div",23),o()),t&2){let e=n.ngIf;a(),m("ngIf",e.data.length>0),a(),m("ngIf",e.data.length>0),a(),m("ngIf",e.data.length===0)}}function Le(t,n){if(t&1){let e=_();i(0,"div"),f(1,we,15,4,"div",6),S(2,"async"),i(3,"div",7)(4,"mat-form-field",8)(5,"mat-label"),c(6,"Search offers"),o(),i(7,"input",9),L("ngModelChange",function(r){l(e);let s=d();return A(s.searchTerm,r)||(s.searchTerm=r),p(r)}),C("ngModelChange",function(){l(e);let r=d();return p(r.onSearchChange())}),o(),i(8,"mat-icon",10),c(9,"search"),o()()(),f(10,Ae,4,3,"div",11),S(11,"async"),o()}if(t&2){let e=d();a(),m("ngIf",w(2,3,e.category$)),a(6),$("ngModel",e.searchTerm),a(3),m("ngIf",w(11,5,e.offers$))}}var ve=class t{constructor(n,e,g,r){this.route=n;this.router=e;this.categoryService=g;this.referralService=r;this.category$=this.route.params.pipe(x(s=>s.id),v(s=>(this.categoryId=s,this.categoryService.getCategoryById(s)))),this.offers$=D([this.route.params.pipe(x(s=>s.id)),this.getSearchObservable(),this.getPaginationObservable()]).pipe(v(([s,Pe,k])=>this.referralService.getOffers({categoryId:s,searchTerm:Pe,isActive:!0,page:k.page,limit:k.pageSize,sortBy:"updatedAt",sortDirection:"desc"})))}destroy$=new T;category$;offers$;categoryId="";searchTerm="";currentPage=1;pageSize=6;loading=!0;ngOnInit(){this.category$.pipe(V(this.destroy$)).subscribe(n=>{n===void 0?this.router.navigate(["/"]):this.loading=!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getSearchObservable(){return new M(n=>(n.next(this.searchTerm),()=>{})).pipe(O(""),E(300),z())}getPaginationObservable(){return new M(n=>(n.next({page:this.currentPage,pageSize:this.pageSize}),()=>{})).pipe(O({page:1,pageSize:6}))}onSearchChange(){this.currentPage=1,this.refreshOffers()}onPageChange(n){this.currentPage=n.pageIndex+1,this.pageSize=n.pageSize,this.refreshOffers()}onOfferClick(n){this.referralService.trackClick(n.id).subscribe(),window.open(n.referralLink,"_blank","noopener,noreferrer")}goBack(){this.router.navigate(["/"])}trackByOffer(n,e){return e.id}refreshOffers(){this.offers$=this.referralService.getOffers({categoryId:this.categoryId,searchTerm:this.searchTerm,isActive:!0,page:this.currentPage,limit:this.pageSize,sortBy:"updatedAt",sortDirection:"desc"})}static \u0275fac=function(e){return new(e||t)(y(G),y(U),y(ge),y(de))};static \u0275cmp=B({type:t,selectors:[["app-category-display"]],decls:3,vars:2,consts:[["noOffersTemplate",""],["noOffersDescTemplate",""],[1,"category-display-container"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["class","header-section",4,"ngIf"],[1,"search-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by title, description, or code...","aria-label","Search offers",3,"ngModelChange","ngModel"],["matSuffix",""],["class","offers-section",4,"ngIf"],[1,"header-section"],["mat-icon-button","","aria-label","Go back to categories",1,"back-button",3,"click"],[1,"category-header"],[1,"category-icon"],[1,"category-info"],[1,"category-title"],[1,"category-description"],[1,"offer-count"],[1,"offers-section"],["class","offers-grid",4,"ngIf"],["aria-label","Select page of offers",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"offers-grid"],["class","offer-card","tabindex","0","role","button",3,"click","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","button",1,"offer-card",3,"click","keydown.enter","keydown.space"],[1,"offer-description",3,"innerHTML"],["class","offer-stats",4,"ngIf"],["align","end"],["mat-raised-button","","color","primary"],[1,"offer-stats"],[1,"stats-icon"],["aria-label","Select page of offers",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf","ngIfElse"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"]],template:function(e,g){e&1&&(i(0,"div",2),f(1,Se,4,0,"div",3)(2,Le,12,7,"div",4),o()),e&2&&(a(),m("ngIf",g.loading),a(),m("ngIf",!g.loading))},dependencies:[Y,N,H,q,ye,fe,_e,Ce,te,J,Z,Q,ee,X,K,ie,ne,ae,re,oe,se,ce,Me,he,ue,pe,me,le,Oe,xe,W],styles:[".category-display-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem;background:#fff;border-radius:12px;margin-top:1rem;margin-bottom:1rem;box-shadow:0 2px 8px #0000001a}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:50vh;gap:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem}.header-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid #eee}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-top:.5rem;color:#666}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{color:#1976d2}.header-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;flex:1}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}.header-section[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#42a5f5);color:#fff;width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.header-section[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{width:60px;height:60px}.header-section[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem}}.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]{flex:1}.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:500;color:#333;margin:0 0 .5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:1.8rem}}.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#666;margin:0 0 .5rem;line-height:1.5}.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .offer-count[_ngcontent-%COMP%]{font-size:.9rem;color:#1976d2;font-weight:500;margin:0}.search-section[_ngcontent-%COMP%]{margin-bottom:2rem}.search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:500px}.offers-section[_ngcontent-%COMP%]   .offers-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}@media (max-width: 768px){.offers-section[_ngcontent-%COMP%]   .offers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;border-radius:12px;box-shadow:0 2px 8px #0000001a}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:500;color:#333;line-height:1.3}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#1976d2;font-weight:500;font-size:.9rem;margin-top:.5rem}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   .offer-description[_ngcontent-%COMP%]{color:#555;line-height:1.6;margin:0 0 1rem;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   .offer-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666;font-size:.85rem;margin-top:.5rem}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   .offer-stats[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding-top:1rem}.offers-section[_ngcontent-%COMP%]   .offer-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#666}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;color:#555}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0 0 1.5rem}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem}  .mat-mdc-paginator{background:transparent;border-radius:8px;margin-top:1rem}@media (max-width: 480px){.category-display-container[_ngcontent-%COMP%]{padding:.5rem}.header-section[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{gap:.5rem}.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-title[_ngcontent-%COMP%]{font-size:1.5rem}.header-section[_ngcontent-%COMP%]   .category-info[_ngcontent-%COMP%]   .category-description[_ngcontent-%COMP%]{font-size:1rem}.offers-section[_ngcontent-%COMP%]   .offers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (prefers-contrast: high){.offer-card[_ngcontent-%COMP%]{border:2px solid #333}.offer-card[_ngcontent-%COMP%]:hover{border-color:#1976d2}}@media (prefers-reduced-motion: reduce){.offer-card[_ngcontent-%COMP%]{transition:none}.offer-card[_ngcontent-%COMP%]:hover{transform:none}}.f[_ngcontent-%COMP%]   ooter-section[_ngcontent-%COMP%]{margin-top:3rem;text-align:center;padding-top:2rem;border-top:1px solid #eee}.f[_ngcontent-%COMP%]   ooter-section[_ngcontent-%COMP%]   .admin-access[_ngcontent-%COMP%]   .admin-login-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;font-weight:500;border-radius:24px;padding:.5rem 1.5rem;transition:all .3s ease}.f[_ngcontent-%COMP%]   ooter-section[_ngcontent-%COMP%]   .admin-access[_ngcontent-%COMP%]   .admin-login-btn[_ngcontent-%COMP%]:hover{background-color:#ffc1071a;transform:translateY(-2px)}.f[_ngcontent-%COMP%]   ooter-section[_ngcontent-%COMP%]   .admin-access[_ngcontent-%COMP%]   .admin-login-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}@media (max-width: 480px){.f[_ngcontent-%COMP%]   ooter-section[_ngcontent-%COMP%]   .admin-access[_ngcontent-%COMP%]   .admin-login-btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.4rem 1.2rem}}"]})};export{ve as CategoryDisplayComponent};
