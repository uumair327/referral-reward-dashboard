import{d as O}from"./chunk-3DL5UBSW.js";import{a as Z,b as ee}from"./chunk-6FAHMFIB.js";import{b as j,c as q,e as D,h as N,k as W,l as X,m as Y}from"./chunk-3ZQEGT5D.js";import{a as T,b as G}from"./chunk-BNOJGNQL.js";import{b as U,d as g,f as V,g as R,j as $,l as H,m as J,p as K,r as Q}from"./chunk-VCTHQUAT.js";import"./chunk-5FVWXJNG.js";import{a as x,b as S,c as k,d as w,f as y,h as F}from"./chunk-RW4EGM7U.js";import{E as I,F as E,W as A,Y as L,Z as B}from"./chunk-347WKLGE.js";import{Ab as f,Cb as h,Cc as P,Gc as v,Ja as m,Na as c,Pc as z,Qb as o,Rb as b,Sb as _,Ua as M,Ya as u,hb as C,ob as d,pb as i,qb as n,rb as s}from"./chunk-5LZ43AQJ.js";import"./chunk-7CGTOI24.js";function ne(a,t){if(a&1&&(i(0,"mat-error"),o(1),n()),a&2){let r=h();m(),_(" ",r.getErrorMessage("username")," ")}}function ie(a,t){if(a&1&&(i(0,"mat-error"),o(1),n()),a&2){let r=h();m(),_(" ",r.getErrorMessage("password")," ")}}function oe(a,t){a&1&&s(0,"mat-spinner",18)}function re(a,t){a&1&&(i(0,"span"),o(1,"Login"),n())}function ae(a,t){a&1&&(i(0,"span"),o(1,"Logging in..."),n())}var te=class a{constructor(t,r,e,l){this.fb=t;this.authService=r;this.router=e;this.snackBar=l;this.loginForm=this.fb.group({username:["",[g.required,g.minLength(3)]],password:["",[g.required,g.minLength(6)]]})}loginForm;loading=!1;hidePassword=!0;ngOnInit(){this.authService.isAuthenticated()&&this.redirectToAdmin()}onSubmit(){if(this.loginForm.valid&&!this.loading){this.loading=!0;let{username:t,password:r}=this.loginForm.value;this.authService.login(t,r).subscribe({next:e=>{this.loading=!1,e.success?(this.snackBar.open("Login successful!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.redirectToAdmin()):this.snackBar.open(e.error||"Login failed","Close",{duration:5e3,panelClass:["error-snackbar"]})},error:e=>{this.loading=!1,this.snackBar.open("An error occurred during login","Close",{duration:5e3,panelClass:["error-snackbar"]}),console.error("Login error:",e)}})}else this.markFormGroupTouched()}redirectToAdmin(){let t=sessionStorage.getItem("admin_redirect_url");t?(sessionStorage.removeItem("admin_redirect_url"),this.router.navigateByUrl(t)):this.router.navigate(["/admin"])}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}getErrorMessage(t){let r=this.loginForm.get(t);if(r?.hasError("required"))return`${t.charAt(0).toUpperCase()+t.slice(1)} is required`;if(r?.hasError("minlength")){let e=r.errors?.minlength?.requiredLength;return`${t.charAt(0).toUpperCase()+t.slice(1)} must be at least ${e} characters`}return""}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static \u0275fac=function(r){return new(r||a)(c(K),c(z),c(O),c(Z))};static \u0275cmp=M({type:a,selectors:[["app-admin-login"]],decls:44,vars:13,consts:[[1,"login-container"],[1,"login-card-wrapper"],[1,"login-card"],[1,"login-title"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter your username","autocomplete","username",3,"disabled"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password","autocomplete","current-password",3,"type","disabled"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"login-button","full-width",3,"disabled"],["diameter","20","class","login-spinner",4,"ngIf"],[1,"demo-info"],[1,"info-icon"],[1,"demo-text"],[1,"back-to-public"],["mat-button","","routerLink","/",1,"back-button"],["diameter","20",1,"login-spinner"]],template:function(r,e){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3),o(5,"Admin Login"),n(),i(6,"mat-card-subtitle"),o(7,"Access the referral dashboard administration panel"),n()(),i(8,"mat-card-content")(9,"form",4),f("ngSubmit",function(){return e.onSubmit()}),i(10,"mat-form-field",5)(11,"mat-label"),o(12,"Username"),n(),s(13,"input",6),i(14,"mat-icon",7),o(15,"person"),n(),u(16,ne,2,1,"mat-error",8),n(),i(17,"mat-form-field",5)(18,"mat-label"),o(19,"Password"),n(),s(20,"input",9),i(21,"button",10),f("click",function(){return e.togglePasswordVisibility()}),i(22,"mat-icon"),o(23),n()(),u(24,ie,2,1,"mat-error",8),n(),i(25,"button",11),u(26,oe,1,0,"mat-spinner",12)(27,re,2,0,"span",8)(28,ae,2,0,"span",8),n()(),i(29,"div",13)(30,"mat-icon",14),o(31,"info"),n(),i(32,"div",15)(33,"strong"),o(34,"Demo Credentials:"),n(),s(35,"br"),o(36," Username: admin"),s(37,"br"),o(38," Password: admin123 "),n()()()(),i(39,"div",16)(40,"button",17)(41,"mat-icon"),o(42,"arrow_back"),n(),o(43," Back to Public Site "),n()()()()),r&2){let l,p;m(9),d("formGroup",e.loginForm),m(4),d("disabled",e.loading),m(3),d("ngIf",((l=e.loginForm.get("username"))==null?null:l.invalid)&&((l=e.loginForm.get("username"))==null?null:l.touched)),m(4),d("type",e.hidePassword?"password":"text")("disabled",e.loading),m(),C("aria-label","Hide password")("aria-pressed",e.hidePassword),m(2),b(e.hidePassword?"visibility_off":"visibility"),m(),d("ngIf",((p=e.loginForm.get("password"))==null?null:p.invalid)&&((p=e.loginForm.get("password"))==null?null:p.touched)),m(),d("disabled",e.loading||e.loginForm.invalid),m(),d("ngIf",e.loading),m(),d("ngIf",!e.loading),m(),d("ngIf",e.loading)}},dependencies:[v,P,Q,$,U,V,R,H,J,F,x,k,y,w,S,W,N,j,q,D,Y,X,B,L,A,E,I,G,T,ee],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:1rem}.login-card-wrapper[_ngcontent-%COMP%]{width:100%;max-width:400px;display:flex;flex-direction:column;gap:1rem}.login-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 10px 30px #0003;overflow:hidden}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#42a5f5);color:#fff;padding:2rem 1.5rem 1.5rem;margin:-1rem -1rem 1rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:500;margin-bottom:.5rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#fffc;font-size:.9rem}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1.5rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{height:48px;font-size:1rem;font-weight:500;margin-top:.5rem;position:relative}.login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]   .login-spinner[_ngcontent-%COMP%]{margin-right:.5rem}.demo-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;margin-top:1.5rem;padding:1rem;background-color:#e3f2fd;border-radius:8px;border-left:4px solid #1976d2}.demo-info[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:20px;width:20px;height:20px;margin-top:2px}.demo-info[_ngcontent-%COMP%]   .demo-text[_ngcontent-%COMP%]{font-size:.85rem;color:#1565c0;line-height:1.4}.demo-info[_ngcontent-%COMP%]   .demo-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0d47a1}.back-to-public[_ngcontent-%COMP%]{text-align:center}.back-to-public[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center;gap:.5rem}.back-to-public[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}  .mat-mdc-form-field .mat-mdc-form-field-focus-overlay{background-color:transparent}  .success-snackbar{background-color:#4caf50;color:#fff}  .error-snackbar{background-color:#f44336;color:#fff}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:.5rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:1.5rem 1rem 1rem}.login-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:1.5rem}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:1rem}.demo-info[_ngcontent-%COMP%]{padding:.75rem}.demo-info[_ngcontent-%COMP%]   .demo-text[_ngcontent-%COMP%]{font-size:.8rem}}@media (prefers-contrast: high){.login-card[_ngcontent-%COMP%]{border:2px solid #333}.demo-info[_ngcontent-%COMP%]{border:1px solid #1976d2}}@media (prefers-reduced-motion: reduce){.login-card[_ngcontent-%COMP%], .login-button[_ngcontent-%COMP%]{transition:none}}"]})};export{te as AdminLoginComponent};
